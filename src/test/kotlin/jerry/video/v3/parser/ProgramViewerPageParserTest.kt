package jerry.video.v3.parser

import jerry.video.v3.model.ProgramPlayer
import org.junit.Test
import java.io.Reader
import java.nio.charset.Charset
import kotlin.test.assertEquals

class ProgramViewerPageParserTest {
    @Test
    fun `parse() - first page`() {
        val testInstance = createParser("version3_program_viewer_page_first.html")
        val programViewer = testInstance.parse()
        assertEquals(
            expected = "epList.aspx?q=RMxVm02CPdrbqCPzoykE%2bLljVQ4qzRlnVw1G4VXDbgVBmKtAgUh8ITocgrxAStfI",
            actual = programViewer.url
        )
        assertEquals(
            expected = listOf(
                ProgramPlayer(
                    title = "영화가 좋다 (Today)",
                    url = "https://www.supervid.net/2019/12/e678191221.html"
                ),
                ProgramPlayer(
                    title = "영화가 좋다 (Today)",
                    url = "https://jetload.net/e/KW0YMPZybeUM"
                )
            ),
            actual = programViewer.playerList
        )
        assertEquals(
            expected = null,
            actual = programViewer.prevKey
        )
        assertEquals(
            expected = mapOf(
                "__EVENTTARGET" to "ctl00\$ContentPlaceHolder1\$epList1\$rptPager\$ctl05\$lnkPage",
                "__EVENTARGUMENT" to "",
                "__VIEWSTATE" to "/wEPDwUKMTc2Nzg5OTY0NQ9kFgJmD2QWBgIBD2QWAgIIDxYCHgRUZXh0Be0JPHNjcmlwdCB0eXBlPSJ0ZXh0L2phdmFzY3JpcHQiPg0KICAgICAgdmFyIG1vYmlsZUNoZWNrID0gZnVuY3Rpb24gKCkgew0KICAgICAgdmFyIHVzZXJBZ2VudCA9IG5hdmlnYXRvci51c2VyQWdlbnQ7DQogICAgICBpZiAodXNlckFnZW50ID09IG51bGwpIHsNCiAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgIH0NCiAgICAgIHZhciBtb2JpbGUxID0gdXNlckFnZW50Lm1hdGNoKCJpUGhvbmV8aVBvZHxpUGFkfEFuZHJvaWR8V2luZG93cyBDRXxCbGFja0JlcnJ5fFN5bWJpYW58V2luZG93cyBQaG9uZXx3ZWJPU3xPcGVyYSBNaW5pfE9wZXJhIE1vYml8UE9MQVJJU3xJRU1vYmlsZXxsZ3RlbGVjb218bm9raWF8U29ueUVyaWNzc29uIik7DQogICAgICB2YXIgbW9iaWxlMiA9IHVzZXJBZ2VudC5tYXRjaCgiTEd8U0FNU1VOR3xTYW1zdW5nIik7DQogICAgICBpZiAobW9iaWxlMSB8fCBtb2JpbGUyKSB7DQogICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgIH0gZWxzZSB7DQogICAgICByZXR1cm4gZmFsc2U7DQogICAgICB9DQogICAgICB9DQogICAgICBpZiAoIW1vYmlsZUNoZWNrKCkpIHsNCiAgICAgIGRvY3VtZW50LndyaXRlKCI8aWZyYW1lIHNyYz0nLy93d3cubWVkaWFjYXRlZ29yeS5jb20vc2VydmxldC9pYWRibj9mcm9tPSIrZXNjYXBlKGRvY3VtZW50LnJlZmVycmVyKSsiJnM9MTc3MzImcHNiPTk5JyBzY3JvbGxpbmc9J25vJyBmcmFtZWJvcmRlcj0wIHdpZHRoPTAgaGVpZ2h0PTA+PC9pZnJhbWU+Iik7DQogICAgICB9DQogICAgICA8L3NjcmlwdD4NCiAgICAgIA0KICAgICAgPHNjcmlwdCBhc3luYyB0eXBlPSJ0ZXh0L2phdmFzY3JpcHQiPg0KICAgICAgKGZ1bmN0aW9uKGNsLCBpLCBjLCBrLCBtLCBvLCBuKSB7DQogICAgICBtID0gY2wubG9jYXRpb24ucHJvdG9jb2wgKyBjOyBvID0gY2wucmVmZXJyZXI7IG0gKz0gJyZtb25fcmY9JyArIGVuY29kZVVSSUNvbXBvbmVudChvKTsNCiAgICAgIG4gPSAnPCcgKyBpICsgJyB0eXBlPSJ0ZXh0L2phdmFzY3JpcHQiIHNyYz0iJyArIG0gKyAnIj48LycgKyBpICsgJz4nOyBjbC53cml0ZWxuKG4pOw0KICAgICAgfSkoZG9jdW1lbnQsICdzY3JpcHQnLCAnLy90YWIyLmNsaWNrbW9uLmNvLmtyL3BvcC9jbV9tYXQucGhwP1BvcEFkPTEwNTMwODgnKTsNCiAgICAgIDwvc2NyaXB0Pg0KDQogICAgICA8c2NyaXB0IGFzeW5jIHNyYz0iLy9nZXQub3B0YWQzNjAuaW8vc2YvOWIzYTljZmYtNTI2MS00OTNiLWJmZTYtMzBlZTllNzA4OWM5L3BsdWdpbi5taW4uanMiPjwvc2NyaXB0PmQCAw9kFgYCAQ8WAh8ABZsBPGlucyBjbGFzcz0ic3RhdGljcHViYWRzODkzNTQiDQogICAgICBkYXRhLXNpemVzLWRlc2t0b3A9IjcyOHg5MCw2MTB4OTAsNjQweDEwMCw2NDB4OTAsNjUweDEwMCw2OTB4MTAwLDcwMHgxMDAsNzIwLDEwMCINCiAgICAgIGRhdGEtc2xvdD0iMSI+DQogICAgICA8L2lucz5kAgcPZBYCAgUPDxYCHgdWaXNpYmxlaGRkAgkPZBYCAgEPDxYKHgdfcXNjb2xsMpwEAAEAAAD/////AQAAAAAAAAAMAgAAAE1TeXN0ZW0uV2ViLCBWZXJzaW9uPTIuMC4wLjAsIEN1bHR1cmU9bmV1dHJhbCwgUHVibGljS2V5VG9rZW49YjAzZjVmN2YxMWQ1MGEzYQUBAAAAHlN5c3RlbS5XZWIuSHR0cFZhbHVlQ29sbGVjdGlvbgYAAAAIUmVhZE9ubHkLS2V5Q29tcGFyZXIFQ291bnQES2V5cwZWYWx1ZXMHVmVyc2lvbgADAAYFAAEWU3lzdGVtLk9yZGluYWxDb21wYXJlcggIAgAAAAAJAwAAAAMAAAAJBAAAAAkFAAAABAAAAAQDAAAAFlN5c3RlbS5PcmRpbmFsQ29tcGFyZXIBAAAAC19pZ25vcmVDYXNlAAEBEQQAAAADAAAABgYAAAADbnVtBgcAAAACZXAGCAAAAAJpcBAFAAAAAwAAAAkJAAAACQoAAAAJCwAAAAQJAAAAHFN5c3RlbS5Db2xsZWN0aW9ucy5BcnJheUxpc3QDAAAABl9pdGVtcwVfc2l6ZQhfdmVyc2lvbgUAAAgICQwAAAABAAAAAQAAAAEKAAAACQAAAAkNAAAAAQAAAAEAAAABCwAAAAkAAAAJDgAAAAEAAAABAAAAEAwAAAABAAAABg8AAAADNDQ1EA0AAAABAAAABhAAAAADNjgwEA4AAAABAAAABhEAAAAOMTIyLjIxNi4zMS4xNDULHglfTWVkaWFOdW0FAzQ0NR4JX3N0ckVwTnVtBQM2ODAeCF9DdXJQYWdlAgEeDF9yZWNvcmRDb3VudAKjE2QWDgIBDw8WAh8ABR1Ub3RhbCAyNDY3IHB1YmxpYyBsaW5rcyBmb3VuZGRkAgMPPCsACQEADxYEHghEYXRhS2V5cxYAHgtfIUl0ZW1Db3VudAIPZBYeZg9kFgICAQ8PFgIfAAW/AjxhIGhyZWY9ImdvbGluay5hc3B4P251bT00NDUmZXA9NjgwJnFsaW5rPWh0dHBzJTNhJTJmJTJmd3d3LnN1cGVydmlkLm5ldCUyZjIwMTklMmYxMiUyZmU2NzgxOTEyMjEuaHRtbCIgdGFyZ2V0PSJfYmxhbmsiPuyYge2ZlOqwgCDsoovri6QgKDxzcGFuIHN0eWxlPSJjb2xvcjpNYXJvb24iPlRvZGF5PC9zcGFuPik8L2E+PGJyIC8+PHNwYW4gc3R5bGU9ImNvbG9yOmdyZXkiPmh0dHBzOi8vPHNwYW4gc3R5bGU9ImNvbG9yOmJsYWNrO2ZvbnQtd2VpZ2h0OiBib2xkIj53d3cuc3VwZXJ2aWQubmV0PC9zcGFuPi8yMDE5LzEyL2U2NzgxOTEyMjEuaHRtbDwvc3Bhbj5kZAIBD2QWAgIBDw8WAh8ABccCPGEgaHJlZj0iZ29saW5rLmFzcHg/bnVtPTQ0NSZlcD02ODAmcWxpbms9aHR0cHMlM2ElMmYlMmZ3d3cuc3VwZXJ2aWQubmV0JTJmMjAxOSUyZjEyJTJmZTY3ODE5MTIyMV8yMC5odG1sIiB0YXJnZXQ9Il9ibGFuayI+7JiB7ZmU6rCAIOyii+uLpCAoPHNwYW4gc3R5bGU9ImNvbG9yOk1hcm9vbiI+VG9kYXk8L3NwYW4+KTwvYT48YnIgLz48c3BhbiBzdHlsZT0iY29sb3I6Z3JleSI+aHR0cHM6Ly88c3BhbiBzdHlsZT0iY29sb3I6YmxhY2s7Zm9udC13ZWlnaHQ6IGJvbGQiPnd3dy5zdXBlcnZpZC5uZXQ8L3NwYW4+LzIwMTkvMTIvZTY3ODE5MTIyMV8yMC5odG0uLi48L3NwYW4+ZGQCAg9kFgICAQ8PFgIfAAXpAjxhIGhyZWY9ImdvbGluay5hc3B4P251bT00NDUmZXA9NjgwJnFsaW5rPWh0dHBzJTNhJTJmJTJmd3d3LmZsYXNodmlkLm5ldCUyZjIwMTklMmYxMiUyZmU2NzgxOTEyMjEuaHRtbCIgdGFyZ2V0PSJfYmxhbmsiPuyYge2ZlOqwgCDsoovri6QgKDxzcGFuIHN0eWxlPSJjb2xvcjpNYXJvb24iPlRvZGF5PC9zcGFuPik8L2E+PGJyIC8+PHNwYW4gc3R5bGU9ImNvbG9yOmdyZXkiPmh0dHBzOi8vPHNwYW4gc3R5bGU9ImNvbG9yOmJsYWNrO2ZvbnQtd2VpZ2h0OiBib2xkIj53d3cuZmxhc2h2aWQubmV0PC9zcGFuPi8yMDE5LzEyL2U2NzgxOTEyMjEuaHRtbDwvc3Bhbj48aW5wdXQgdHlwZT0iaGlkZGVuIiBuYW1lPSJJTF9JTl9BUlRJQ0xFIj5kZAIDD2QWAgIBDw8WAh8ABccCPGEgaHJlZj0iZ29saW5rLmFzcHg/bnVtPTQ0NSZlcD02ODAmcWxpbms9aHR0cHMlM2ElMmYlMmZ3d3cuZmxhc2h2aWQubmV0JTJmMjAxOSUyZjEyJTJmZTY3ODE5MTIyMV8yMS5odG1sIiB0YXJnZXQ9Il9ibGFuayI+7JiB7ZmU6rCAIOyii+uLpCAoPHNwYW4gc3R5bGU9ImNvbG9yOk1hcm9vbiI+VG9kYXk8L3NwYW4+KTwvYT48YnIgLz48c3BhbiBzdHlsZT0iY29sb3I6Z3JleSI+aHR0cHM6Ly88c3BhbiBzdHlsZT0iY29sb3I6YmxhY2s7Zm9udC13ZWlnaHQ6IGJvbGQiPnd3dy5mbGFzaHZpZC5uZXQ8L3NwYW4+LzIwMTkvMTIvZTY3ODE5MTIyMV8yMS5odG0uLi48L3NwYW4+ZGQCBA9kFgICAQ8PFgIfAAXBAjxhIGhyZWY9ImdvbGluay5hc3B4P251bT00NDUmZXA9NjgwJnFsaW5rPWh0dHBzJTNhJTJmJTJmaXBmc3R1YmUuY2x1YiUyZjIlMmYlM2ZlbWJlZCUzZHBLQkszeEZzRWRMN3B3dnI4IiB0YXJnZXQ9Il9ibGFuayI+7JiB7ZmU6rCAIOyii+uLpCAoPHNwYW4gc3R5bGU9ImNvbG9yOk1hcm9vbiI+VG9kYXk8L3NwYW4+KTwvYT48YnIgLz48c3BhbiBzdHlsZT0iY29sb3I6Z3JleSI+aHR0cHM6Ly88c3BhbiBzdHlsZT0iY29sb3I6YmxhY2s7Zm9udC13ZWlnaHQ6IGJvbGQiPmlwZnN0dWJlLmNsdWI8L3NwYW4+LzIvP2VtYmVkPXBLQkszeEZzRWRMN3B3dnI4PC9zcGFuPmRkAgUPZBYCAgEPDxYCHwAFwQI8YSBocmVmPSJnb2xpbmsuYXNweD9udW09NDQ1JmVwPTY4MCZxbGluaz1odHRwcyUzYSUyZiUyZmlwZnN0dWJlLmNsdWIlMmYyJTJmJTNmZW1iZWQlM2RKbmJEcGdlcE1Faks3MkFqNiIgdGFyZ2V0PSJfYmxhbmsiPuyYge2ZlOqwgCDsoovri6QgKDxzcGFuIHN0eWxlPSJjb2xvcjpNYXJvb24iPlRvZGF5PC9zcGFuPik8L2E+PGJyIC8+PHNwYW4gc3R5bGU9ImNvbG9yOmdyZXkiPmh0dHBzOi8vPHNwYW4gc3R5bGU9ImNvbG9yOmJsYWNrO2ZvbnQtd2VpZ2h0OiBib2xkIj5pcGZzdHViZS5jbHViPC9zcGFuPi8yLz9lbWJlZD1KbmJEcGdlcE1Faks3MkFqNjwvc3Bhbj5kZAIGD2QWAgIBDw8WAh8ABcECPGEgaHJlZj0iZ29saW5rLmFzcHg/bnVtPTQ0NSZlcD02ODAmcWxpbms9aHR0cHMlM2ElMmYlMmZpcGZzdHViZS5jbHViJTJmMiUyZiUzZmVtYmVkJTNkYlpvNEVlOW5zNjhGZVJWcTgiIHRhcmdldD0iX2JsYW5rIj7smIHtmZTqsIAg7KKL64ukICg8c3BhbiBzdHlsZT0iY29sb3I6TWFyb29uIj5Ub2RheTwvc3Bhbj4pPC9hPjxiciAvPjxzcGFuIHN0eWxlPSJjb2xvcjpncmV5Ij5odHRwczovLzxzcGFuIHN0eWxlPSJjb2xvcjpibGFjaztmb250LXdlaWdodDogYm9sZCI+aXBmc3R1YmUuY2x1Yjwvc3Bhbj4vMi8/ZW1iZWQ9YlpvNEVlOW5zNjhGZVJWcTg8L3NwYW4+ZGQCBw9kFgICAQ8PFgIfAAXBAjxhIGhyZWY9ImdvbGluay5hc3B4P251bT00NDUmZXA9NjgwJnFsaW5rPWh0dHBzJTNhJTJmJTJmaXBmc3R1YmUuY2x1YiUyZjIlMmYlM2ZlbWJlZCUzZEx0REZiR2RiMmtSRkR4VHk2IiB0YXJnZXQ9Il9ibGFuayI+7JiB7ZmU6rCAIOyii+uLpCAoPHNwYW4gc3R5bGU9ImNvbG9yOk1hcm9vbiI+VG9kYXk8L3NwYW4+KTwvYT48YnIgLz48c3BhbiBzdHlsZT0iY29sb3I6Z3JleSI+aHR0cHM6Ly88c3BhbiBzdHlsZT0iY29sb3I6YmxhY2s7Zm9udC13ZWlnaHQ6IGJvbGQiPmlwZnN0dWJlLmNsdWI8L3NwYW4+LzIvP2VtYmVkPUx0REZiR2RiMmtSRkR4VHk2PC9zcGFuPmRkAggPZBYCAgEPDxYCHwAFwQI8YSBocmVmPSJnb2xpbmsuYXNweD9udW09NDQ1JmVwPTY4MCZxbGluaz1odHRwcyUzYSUyZiUyZmlwZnN0dWJlLmNsdWIlMmYyJTJmJTNmZW1iZWQlM2RGUVpQSDExZ3UxUlhWdE01QSIgdGFyZ2V0PSJfYmxhbmsiPuyYge2ZlOqwgCDsoovri6QgKDxzcGFuIHN0eWxlPSJjb2xvcjpNYXJvb24iPlRvZGF5PC9zcGFuPik8L2E+PGJyIC8+PHNwYW4gc3R5bGU9ImNvbG9yOmdyZXkiPmh0dHBzOi8vPHNwYW4gc3R5bGU9ImNvbG9yOmJsYWNrO2ZvbnQtd2VpZ2h0OiBib2xkIj5pcGZzdHViZS5jbHViPC9zcGFuPi8yLz9lbWJlZD1GUVpQSDExZ3UxUlhWdE01QTwvc3Bhbj5kZAIJD2QWAgIBDw8WAh8ABcECPGEgaHJlZj0iZ29saW5rLmFzcHg/bnVtPTQ0NSZlcD02ODAmcWxpbms9aHR0cHMlM2ElMmYlMmZpcGZzdHViZS5jbHViJTJmMiUyZiUzZmVtYmVkJTNkTW1raTFGY0h3eEd2Uk5LUjYiIHRhcmdldD0iX2JsYW5rIj7smIHtmZTqsIAg7KKL64ukICg8c3BhbiBzdHlsZT0iY29sb3I6TWFyb29uIj5Ub2RheTwvc3Bhbj4pPC9hPjxiciAvPjxzcGFuIHN0eWxlPSJjb2xvcjpncmV5Ij5odHRwczovLzxzcGFuIHN0eWxlPSJjb2xvcjpibGFjaztmb250LXdlaWdodDogYm9sZCI+aXBmc3R1YmUuY2x1Yjwvc3Bhbj4vMi8/ZW1iZWQ9TW1raTFGY0h3eEd2Uk5LUjY8L3NwYW4+ZGQCCg9kFgICAQ8PFgIfAAWhAjxhIGhyZWY9ImdvbGluay5hc3B4P251bT00NDUmZXA9NjgwJnFsaW5rPWh0dHBzJTNhJTJmJTJmaGxzcGxheS5jb20lMmZlJTJmS1cwWU1QWnliZVVNIiB0YXJnZXQ9Il9ibGFuayI+7JiB7ZmU6rCAIOyii+uLpCAoPHNwYW4gc3R5bGU9ImNvbG9yOk1hcm9vbiI+VG9kYXk8L3NwYW4+KTwvYT48YnIgLz48c3BhbiBzdHlsZT0iY29sb3I6Z3JleSI+aHR0cHM6Ly88c3BhbiBzdHlsZT0iY29sb3I6YmxhY2s7Zm9udC13ZWlnaHQ6IGJvbGQiPmhsc3BsYXkuY29tPC9zcGFuPi9lL0tXMFlNUFp5YmVVTTwvc3Bhbj5kZAILD2QWAgIBDw8WAh8ABaECPGEgaHJlZj0iZ29saW5rLmFzcHg/bnVtPTQ0NSZlcD02ODAmcWxpbms9aHR0cHMlM2ElMmYlMmZobHNwbGF5LmNvbSUyZmUlMmYxMXIxUTFMZExud0IiIHRhcmdldD0iX2JsYW5rIj7smIHtmZTqsIAg7KKL64ukICg8c3BhbiBzdHlsZT0iY29sb3I6TWFyb29uIj5Ub2RheTwvc3Bhbj4pPC9hPjxiciAvPjxzcGFuIHN0eWxlPSJjb2xvcjpncmV5Ij5odHRwczovLzxzcGFuIHN0eWxlPSJjb2xvcjpibGFjaztmb250LXdlaWdodDogYm9sZCI+aGxzcGxheS5jb208L3NwYW4+L2UvMTFyMVExTGRMbndCPC9zcGFuPmRkAgwPZBYCAgEPDxYCHwAFoQI8YSBocmVmPSJnb2xpbmsuYXNweD9udW09NDQ1JmVwPTY4MCZxbGluaz1odHRwcyUzYSUyZiUyZmhsc3BsYXkuY29tJTJmZSUyZlBkQUZMNEx4elM0QyIgdGFyZ2V0PSJfYmxhbmsiPuyYge2ZlOqwgCDsoovri6QgKDxzcGFuIHN0eWxlPSJjb2xvcjpNYXJvb24iPlRvZGF5PC9zcGFuPik8L2E+PGJyIC8+PHNwYW4gc3R5bGU9ImNvbG9yOmdyZXkiPmh0dHBzOi8vPHNwYW4gc3R5bGU9ImNvbG9yOmJsYWNrO2ZvbnQtd2VpZ2h0OiBib2xkIj5obHNwbGF5LmNvbTwvc3Bhbj4vZS9QZEFGTDRMeHpTNEM8L3NwYW4+ZGQCDQ9kFgICAQ8PFgIfAAWhAjxhIGhyZWY9ImdvbGluay5hc3B4P251bT00NDUmZXA9NjgwJnFsaW5rPWh0dHBzJTNhJTJmJTJmaGxzcGxheS5jb20lMmZlJTJmazZIOGhyM2pDWGRHIiB0YXJnZXQ9Il9ibGFuayI+7JiB7ZmU6rCAIOyii+uLpCAoPHNwYW4gc3R5bGU9ImNvbG9yOk1hcm9vbiI+VG9kYXk8L3NwYW4+KTwvYT48YnIgLz48c3BhbiBzdHlsZT0iY29sb3I6Z3JleSI+aHR0cHM6Ly88c3BhbiBzdHlsZT0iY29sb3I6YmxhY2s7Zm9udC13ZWlnaHQ6IGJvbGQiPmhsc3BsYXkuY29tPC9zcGFuPi9lL2s2SDhocjNqQ1hkRzwvc3Bhbj5kZAIOD2QWAgIBDw8WAh8ABaECPGEgaHJlZj0iZ29saW5rLmFzcHg/bnVtPTQ0NSZlcD02ODAmcWxpbms9aHR0cHMlM2ElMmYlMmZqZXRsb2FkLm5ldCUyZmUlMmZLVzBZTVBaeWJlVU0iIHRhcmdldD0iX2JsYW5rIj7smIHtmZTqsIAg7KKL64ukICg8c3BhbiBzdHlsZT0iY29sb3I6TWFyb29uIj5Ub2RheTwvc3Bhbj4pPC9hPjxiciAvPjxzcGFuIHN0eWxlPSJjb2xvcjpncmV5Ij5odHRwczovLzxzcGFuIHN0eWxlPSJjb2xvcjpibGFjaztmb250LXdlaWdodDogYm9sZCI+amV0bG9hZC5uZXQ8L3NwYW4+L2UvS1cwWU1QWnliZVVNPC9zcGFuPmRkAgUPFgIfCAIHFg5mD2QWAgIBDw8WCh8ABQExHg9Db21tYW5kQXJndW1lbnQFATEeCENzc0NsYXNzBQ1wYWdlX2Rpc2FibGVkHg1PbkNsaWVudENsaWNrBQ1yZXR1cm4gZmFsc2U7HgRfIVNCAgJkZAIBD2QWAgIBDw8WCh8ABQEyHwkFATIfCgUMcGFnZV9lbmFibGVkHwtlHwwCAmRkAgIPZBYCAgEPDxYKHwAFATMfCQUBMx8KBQxwYWdlX2VuYWJsZWQfC2UfDAICZGQCAw9kFgICAQ8PFgofAAUBNB8JBQE0HwoFDHBhZ2VfZW5hYmxlZB8LZR8MAgJkZAIED2QWAgIBDw8WCh8ABQE1HwkFATUfCgUMcGFnZV9lbmFibGVkHwtlHwwCAmRkAgUPZBYCAgEPDxYKHwAFAj4+HwkFATIfCgUMcGFnZV9lbmFibGVkHwtlHwwCAmRkAgYPZBYCAgEPDxYKHwAFBExhc3QfCQUDMTY1HwoFDHBhZ2VfZW5hYmxlZB8LZR8MAgJkZAIHDw8WAh8ABbsBPGlmcmFtZSBzcmM9Ik1lZGlhVGh1bW5haWwuYXNweD9pbWc9MTI0MTg5NDA5MW1tbS5qcGcmYWx0PeyYge2ZlOqwgCDsoovri6Qmdz0xNDYmaD0xMDAiIHdpZHRoPSIxNDYiIGhlaWdodD0iMTAwIiBzY3JvbGxpbmc9Im5vIiBmcmFtZWJvcmRlcj0iMCIgbWFyZ2lud2lkdGg9IjAiIG1hcmdpbmhlaWdodD0iMCIgPjwvaWZyYW1lPmRkAgsPDxYCHwAFGeyYge2ZlOqwgCDsoovri6QgLSDsmKTrnb1kZAIPDw8WAh8AZWRkAhEPDxYCHwAFezxhIGhyZWY9IiIgdGFyZ2V0PSJfYmxhbmsiPuqzteyLnSDtmYjtjpjsnbTsp4A8L2E+Jm5ic3A7Jm5ic3A7PGEgaHJlZj0icmVMaXN0LmFzcHg/bnVtPTQ0NSIgdGFyZ2V0PSJfc2VsZiI+64uk7Iuc67O06riwPC9hPmRkAgUPFgIfAAW8ATxzY3JpcHQgdHlwZT0idGV4dC9qYXZhc2NyaXB0Ij4gdmFyIGluZm9saW5rc19waWQgPSAzMTU2MTk2OyB2YXIgaW5mb2xpbmtzX3dzaWQgPSAwOyA8L3NjcmlwdD4gPHNjcmlwdCB0eXBlPSJ0ZXh0L2phdmFzY3JpcHQiIHNyYz0iLy9yZXNvdXJjZXMuaW5mb2xpbmtzLmNvbS9qcy9pbmZvbGlua3NfbWFpbi5qcyI+PC9zY3JpcHQ+ZGTULCTJU6nLU+mgULWgi0SrZTgg9w==",
                "__VIEWSTATEGENERATOR" to "111DFAF7",
                "__EVENTVALIDATION" to "/wEWCQK38/uoBALqvpf4BAL4mcvwCAL4mbfrCwL4maM2AviZj7EDAviZ+6sBAviZ56YEAviZ04gB0E5AXdX+SedhQjCjNo8YBnoPwJU="
            ),
            actual = programViewer.nextKey
        )
    }

    @Test
    fun `parse() - middle page`() {
        val testInstance = createParser("version3_program_viewer_page_middle.html")
        val programViewer = testInstance.parse()
        assertEquals(
            expected = "epList.aspx?q=RMxVm02CPdrbqCPzoykE%2bLljVQ4qzRlnVw1G4VXDbgVBmKtAgUh8ITocgrxAStfI",
            actual = programViewer.url
        )
        assertEquals(
            expected = listOf(
                ProgramPlayer(
                    title = "영화가 좋다 (Today)",
                    url = "https://jetload.net/e/11r1Q1LdLnwB"
                ),
                ProgramPlayer(
                    title = "영화가 좋다 (12/14/19 Sat)",
                    url = "https://hlsplay.com/e/MJx09Qky0X8X"
                )
            ),
            actual = programViewer.playerList
        )
        assertEquals(
            expected = mapOf(
                "__EVENTTARGET" to "ctl00\$ContentPlaceHolder1\$epList1\$rptPager\$ctl01\$lnkPage",
                "__EVENTARGUMENT" to "",
                "__VIEWSTATE" to "/wEPDwUKMTc2Nzg5OTY0NQ9kFgJmD2QWBgIBD2QWAgIIDxYCHgRUZXh0Be0JPHNjcmlwdCB0eXBlPSJ0ZXh0L2phdmFzY3JpcHQiPg0KICAgICAgdmFyIG1vYmlsZUNoZWNrID0gZnVuY3Rpb24gKCkgew0KICAgICAgdmFyIHVzZXJBZ2VudCA9IG5hdmlnYXRvci51c2VyQWdlbnQ7DQogICAgICBpZiAodXNlckFnZW50ID09IG51bGwpIHsNCiAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgIH0NCiAgICAgIHZhciBtb2JpbGUxID0gdXNlckFnZW50Lm1hdGNoKCJpUGhvbmV8aVBvZHxpUGFkfEFuZHJvaWR8V2luZG93cyBDRXxCbGFja0JlcnJ5fFN5bWJpYW58V2luZG93cyBQaG9uZXx3ZWJPU3xPcGVyYSBNaW5pfE9wZXJhIE1vYml8UE9MQVJJU3xJRU1vYmlsZXxsZ3RlbGVjb218bm9raWF8U29ueUVyaWNzc29uIik7DQogICAgICB2YXIgbW9iaWxlMiA9IHVzZXJBZ2VudC5tYXRjaCgiTEd8U0FNU1VOR3xTYW1zdW5nIik7DQogICAgICBpZiAobW9iaWxlMSB8fCBtb2JpbGUyKSB7DQogICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgIH0gZWxzZSB7DQogICAgICByZXR1cm4gZmFsc2U7DQogICAgICB9DQogICAgICB9DQogICAgICBpZiAoIW1vYmlsZUNoZWNrKCkpIHsNCiAgICAgIGRvY3VtZW50LndyaXRlKCI8aWZyYW1lIHNyYz0nLy93d3cubWVkaWFjYXRlZ29yeS5jb20vc2VydmxldC9pYWRibj9mcm9tPSIrZXNjYXBlKGRvY3VtZW50LnJlZmVycmVyKSsiJnM9MTc3MzImcHNiPTk5JyBzY3JvbGxpbmc9J25vJyBmcmFtZWJvcmRlcj0wIHdpZHRoPTAgaGVpZ2h0PTA+PC9pZnJhbWU+Iik7DQogICAgICB9DQogICAgICA8L3NjcmlwdD4NCiAgICAgIA0KICAgICAgPHNjcmlwdCBhc3luYyB0eXBlPSJ0ZXh0L2phdmFzY3JpcHQiPg0KICAgICAgKGZ1bmN0aW9uKGNsLCBpLCBjLCBrLCBtLCBvLCBuKSB7DQogICAgICBtID0gY2wubG9jYXRpb24ucHJvdG9jb2wgKyBjOyBvID0gY2wucmVmZXJyZXI7IG0gKz0gJyZtb25fcmY9JyArIGVuY29kZVVSSUNvbXBvbmVudChvKTsNCiAgICAgIG4gPSAnPCcgKyBpICsgJyB0eXBlPSJ0ZXh0L2phdmFzY3JpcHQiIHNyYz0iJyArIG0gKyAnIj48LycgKyBpICsgJz4nOyBjbC53cml0ZWxuKG4pOw0KICAgICAgfSkoZG9jdW1lbnQsICdzY3JpcHQnLCAnLy90YWIyLmNsaWNrbW9uLmNvLmtyL3BvcC9jbV9tYXQucGhwP1BvcEFkPTEwNTMwODgnKTsNCiAgICAgIDwvc2NyaXB0Pg0KDQogICAgICA8c2NyaXB0IGFzeW5jIHNyYz0iLy9nZXQub3B0YWQzNjAuaW8vc2YvOWIzYTljZmYtNTI2MS00OTNiLWJmZTYtMzBlZTllNzA4OWM5L3BsdWdpbi5taW4uanMiPjwvc2NyaXB0PmQCAw9kFgYCAQ8WAh8ABZsBPGlucyBjbGFzcz0ic3RhdGljcHViYWRzODkzNTQiDQogICAgICBkYXRhLXNpemVzLWRlc2t0b3A9IjcyOHg5MCw2MTB4OTAsNjQweDEwMCw2NDB4OTAsNjUweDEwMCw2OTB4MTAwLDcwMHgxMDAsNzIwLDEwMCINCiAgICAgIGRhdGEtc2xvdD0iMSI+DQogICAgICA8L2lucz5kAgcPZBYCAgUPDxYEHwAFCk15IFByb2ZpbGUeB1Zpc2libGVoZGQCCQ9kFgICAQ8PFgoeB19xc2NvbGwynAQAAQAAAP////8BAAAAAAAAAAwCAAAATVN5c3RlbS5XZWIsIFZlcnNpb249Mi4wLjAuMCwgQ3VsdHVyZT1uZXV0cmFsLCBQdWJsaWNLZXlUb2tlbj1iMDNmNWY3ZjExZDUwYTNhBQEAAAAeU3lzdGVtLldlYi5IdHRwVmFsdWVDb2xsZWN0aW9uBgAAAAhSZWFkT25seQtLZXlDb21wYXJlcgVDb3VudARLZXlzBlZhbHVlcwdWZXJzaW9uAAMABgUAARZTeXN0ZW0uT3JkaW5hbENvbXBhcmVyCAgCAAAAAAkDAAAAAwAAAAkEAAAACQUAAAAEAAAABAMAAAAWU3lzdGVtLk9yZGluYWxDb21wYXJlcgEAAAALX2lnbm9yZUNhc2UAAQERBAAAAAMAAAAGBgAAAANudW0GBwAAAAJlcAYIAAAAAmlwEAUAAAADAAAACQkAAAAJCgAAAAkLAAAABAkAAAAcU3lzdGVtLkNvbGxlY3Rpb25zLkFycmF5TGlzdAMAAAAGX2l0ZW1zBV9zaXplCF92ZXJzaW9uBQAACAgJDAAAAAEAAAABAAAAAQoAAAAJAAAACQ0AAAABAAAAAQAAAAELAAAACQAAAAkOAAAAAQAAAAEAAAAQDAAAAAEAAAAGDwAAAAM0NDUQDQAAAAEAAAAGEAAAAAM2ODAQDgAAAAEAAAAGEQAAAA4xMjIuMjE2LjMxLjE0NQseCV9NZWRpYU51bQUDNDQ1Hglfc3RyRXBOdW0FAzY4MB4IX0N1clBhZ2UCAh4MX3JlY29yZENvdW50AqMTZBYOAgEPDxYCHwAFHVRvdGFsIDI0NjcgcHVibGljIGxpbmtzIGZvdW5kZGQCAw88KwAJAQAPFgQeCERhdGFLZXlzFgAeC18hSXRlbUNvdW50Ag9kFh5mD2QWAgIBDw8WAh8ABaECPGEgaHJlZj0iZ29saW5rLmFzcHg/bnVtPTQ0NSZlcD02ODAmcWxpbms9aHR0cHMlM2ElMmYlMmZqZXRsb2FkLm5ldCUyZmUlMmYxMXIxUTFMZExud0IiIHRhcmdldD0iX2JsYW5rIj7smIHtmZTqsIAg7KKL64ukICg8c3BhbiBzdHlsZT0iY29sb3I6TWFyb29uIj5Ub2RheTwvc3Bhbj4pPC9hPjxiciAvPjxzcGFuIHN0eWxlPSJjb2xvcjpncmV5Ij5odHRwczovLzxzcGFuIHN0eWxlPSJjb2xvcjpibGFjaztmb250LXdlaWdodDogYm9sZCI+amV0bG9hZC5uZXQ8L3NwYW4+L2UvMTFyMVExTGRMbndCPC9zcGFuPmRkAgEPZBYCAgEPDxYCHwAFoQI8YSBocmVmPSJnb2xpbmsuYXNweD9udW09NDQ1JmVwPTY4MCZxbGluaz1odHRwcyUzYSUyZiUyZmpldGxvYWQubmV0JTJmZSUyZlBkQUZMNEx4elM0QyIgdGFyZ2V0PSJfYmxhbmsiPuyYge2ZlOqwgCDsoovri6QgKDxzcGFuIHN0eWxlPSJjb2xvcjpNYXJvb24iPlRvZGF5PC9zcGFuPik8L2E+PGJyIC8+PHNwYW4gc3R5bGU9ImNvbG9yOmdyZXkiPmh0dHBzOi8vPHNwYW4gc3R5bGU9ImNvbG9yOmJsYWNrO2ZvbnQtd2VpZ2h0OiBib2xkIj5qZXRsb2FkLm5ldDwvc3Bhbj4vZS9QZEFGTDRMeHpTNEM8L3NwYW4+ZGQCAg9kFgICAQ8PFgIfAAXLAjxhIGhyZWY9ImdvbGluay5hc3B4P251bT00NDUmZXA9NjgwJnFsaW5rPWh0dHBzJTNhJTJmJTJmamV0bG9hZC5uZXQlMmZlJTJmazZIOGhyM2pDWGRHIiB0YXJnZXQ9Il9ibGFuayI+7JiB7ZmU6rCAIOyii+uLpCAoPHNwYW4gc3R5bGU9ImNvbG9yOk1hcm9vbiI+VG9kYXk8L3NwYW4+KTwvYT48YnIgLz48c3BhbiBzdHlsZT0iY29sb3I6Z3JleSI+aHR0cHM6Ly88c3BhbiBzdHlsZT0iY29sb3I6YmxhY2s7Zm9udC13ZWlnaHQ6IGJvbGQiPmpldGxvYWQubmV0PC9zcGFuPi9lL2s2SDhocjNqQ1hkRzwvc3Bhbj48aW5wdXQgdHlwZT0iaGlkZGVuIiBuYW1lPSJJTF9JTl9BUlRJQ0xFIj5kZAIDD2QWAgIBDw8WAh8ABbcCPGEgaHJlZj0iZ29saW5rLmFzcHg/bnVtPTQ0NSZlcD02ODAmcWxpbms9aHR0cHMlM2ElMmYlMmZnb3VubGltaXRlZC50byUyZmVtYmVkLWp3Nm9nYzN1am9oby5odG1sIiB0YXJnZXQ9Il9ibGFuayI+7JiB7ZmU6rCAIOyii+uLpCAoPHNwYW4gc3R5bGU9ImNvbG9yOk1hcm9vbiI+VG9kYXk8L3NwYW4+KTwvYT48YnIgLz48c3BhbiBzdHlsZT0iY29sb3I6Z3JleSI+aHR0cHM6Ly88c3BhbiBzdHlsZT0iY29sb3I6YmxhY2s7Zm9udC13ZWlnaHQ6IGJvbGQiPmdvdW5saW1pdGVkLnRvPC9zcGFuPi9lbWJlZC1qdzZvZ2MzdWpvaG8uaHRtbDwvc3Bhbj5kZAIED2QWAgIBDw8WAh8ABbYCPGEgaHJlZj0iZ29saW5rLmFzcHg/bnVtPTQ0NSZlcD02NzkmcWxpbms9aHR0cHMlM2ElMmYlMmZ3d3cuc3VwZXJ2aWQubmV0JTJmJTNmJTJmMTkxMjE0XzExNDY1MyIgdGFyZ2V0PSJfYmxhbmsiPuyYge2ZlOqwgCDsoovri6QgKDxzcGFuIHN0eWxlPSJjb2xvcjpNYXJvb24iPjEyLzE0LzE5IFNhdDwvc3Bhbj4pPC9hPjxiciAvPjxzcGFuIHN0eWxlPSJjb2xvcjpncmV5Ij5odHRwczovLzxzcGFuIHN0eWxlPSJjb2xvcjpibGFjaztmb250LXdlaWdodDogYm9sZCI+d3d3LnN1cGVydmlkLm5ldDwvc3Bhbj4vPy8xOTEyMTRfMTE0NjUzPC9zcGFuPmRkAgUPZBYCAgEPDxYCHwAFtgI8YSBocmVmPSJnb2xpbmsuYXNweD9udW09NDQ1JmVwPTY3OSZxbGluaz1odHRwcyUzYSUyZiUyZnd3dy5zdXBlcnZpZC5uZXQlMmYlM2YlMmYxOTEyMTRfMTE1MDQzIiB0YXJnZXQ9Il9ibGFuayI+7JiB7ZmU6rCAIOyii+uLpCAoPHNwYW4gc3R5bGU9ImNvbG9yOk1hcm9vbiI+MTIvMTQvMTkgU2F0PC9zcGFuPik8L2E+PGJyIC8+PHNwYW4gc3R5bGU9ImNvbG9yOmdyZXkiPmh0dHBzOi8vPHNwYW4gc3R5bGU9ImNvbG9yOmJsYWNrO2ZvbnQtd2VpZ2h0OiBib2xkIj53d3cuc3VwZXJ2aWQubmV0PC9zcGFuPi8/LzE5MTIxNF8xMTUwNDM8L3NwYW4+ZGQCBg9kFgICAQ8PFgIfAAXGAjxhIGhyZWY9ImdvbGluay5hc3B4P251bT00NDUmZXA9Njc5JnFsaW5rPWh0dHBzJTNhJTJmJTJmd3d3LmZsYXNodmlkLm5ldCUyZjIwMTklMmYxMiUyZmU2NzcxOTEyMTQuaHRtbCIgdGFyZ2V0PSJfYmxhbmsiPuyYge2ZlOqwgCDsoovri6QgKDxzcGFuIHN0eWxlPSJjb2xvcjpNYXJvb24iPjEyLzE0LzE5IFNhdDwvc3Bhbj4pPC9hPjxiciAvPjxzcGFuIHN0eWxlPSJjb2xvcjpncmV5Ij5odHRwczovLzxzcGFuIHN0eWxlPSJjb2xvcjpibGFjaztmb250LXdlaWdodDogYm9sZCI+d3d3LmZsYXNodmlkLm5ldDwvc3Bhbj4vMjAxOS8xMi9lNjc3MTkxMjE0Lmh0bWw8L3NwYW4+ZGQCBw9kFgICAQ8PFgIfAAXOAjxhIGhyZWY9ImdvbGluay5hc3B4P251bT00NDUmZXA9Njc5JnFsaW5rPWh0dHBzJTNhJTJmJTJmd3d3LmZsYXNodmlkLm5ldCUyZjIwMTklMmYxMiUyZmU2NzcxOTEyMTRfMTQuaHRtbCIgdGFyZ2V0PSJfYmxhbmsiPuyYge2ZlOqwgCDsoovri6QgKDxzcGFuIHN0eWxlPSJjb2xvcjpNYXJvb24iPjEyLzE0LzE5IFNhdDwvc3Bhbj4pPC9hPjxiciAvPjxzcGFuIHN0eWxlPSJjb2xvcjpncmV5Ij5odHRwczovLzxzcGFuIHN0eWxlPSJjb2xvcjpibGFjaztmb250LXdlaWdodDogYm9sZCI+d3d3LmZsYXNodmlkLm5ldDwvc3Bhbj4vMjAxOS8xMi9lNjc3MTkxMjE0XzE0Lmh0bS4uLjwvc3Bhbj5kZAIID2QWAgIBDw8WAh8ABcgCPGEgaHJlZj0iZ29saW5rLmFzcHg/bnVtPTQ0NSZlcD02NzkmcWxpbms9aHR0cHMlM2ElMmYlMmZpcGZzdHViZS5jbHViJTJmMiUyZiUzZmVtYmVkJTNkVjJUNmZVa005OVlDUm9TQzciIHRhcmdldD0iX2JsYW5rIj7smIHtmZTqsIAg7KKL64ukICg8c3BhbiBzdHlsZT0iY29sb3I6TWFyb29uIj4xMi8xNC8xOSBTYXQ8L3NwYW4+KTwvYT48YnIgLz48c3BhbiBzdHlsZT0iY29sb3I6Z3JleSI+aHR0cHM6Ly88c3BhbiBzdHlsZT0iY29sb3I6YmxhY2s7Zm9udC13ZWlnaHQ6IGJvbGQiPmlwZnN0dWJlLmNsdWI8L3NwYW4+LzIvP2VtYmVkPVYyVDZmVWtNOTlZQ1JvU0M3PC9zcGFuPmRkAgkPZBYCAgEPDxYCHwAFyAI8YSBocmVmPSJnb2xpbmsuYXNweD9udW09NDQ1JmVwPTY3OSZxbGluaz1odHRwcyUzYSUyZiUyZmlwZnN0dWJlLmNsdWIlMmYyJTJmJTNmZW1iZWQlM2R2U01Tb1JDVk5hdVNiYTc3OSIgdGFyZ2V0PSJfYmxhbmsiPuyYge2ZlOqwgCDsoovri6QgKDxzcGFuIHN0eWxlPSJjb2xvcjpNYXJvb24iPjEyLzE0LzE5IFNhdDwvc3Bhbj4pPC9hPjxiciAvPjxzcGFuIHN0eWxlPSJjb2xvcjpncmV5Ij5odHRwczovLzxzcGFuIHN0eWxlPSJjb2xvcjpibGFjaztmb250LXdlaWdodDogYm9sZCI+aXBmc3R1YmUuY2x1Yjwvc3Bhbj4vMi8/ZW1iZWQ9dlNNU29SQ1ZOYXVTYmE3Nzk8L3NwYW4+ZGQCCg9kFgICAQ8PFgIfAAXIAjxhIGhyZWY9ImdvbGluay5hc3B4P251bT00NDUmZXA9Njc5JnFsaW5rPWh0dHBzJTNhJTJmJTJmaXBmc3R1YmUuY2x1YiUyZjIlMmYlM2ZlbWJlZCUzZDlDZjI2TVdqUXpqd3RQd0E4IiB0YXJnZXQ9Il9ibGFuayI+7JiB7ZmU6rCAIOyii+uLpCAoPHNwYW4gc3R5bGU9ImNvbG9yOk1hcm9vbiI+MTIvMTQvMTkgU2F0PC9zcGFuPik8L2E+PGJyIC8+PHNwYW4gc3R5bGU9ImNvbG9yOmdyZXkiPmh0dHBzOi8vPHNwYW4gc3R5bGU9ImNvbG9yOmJsYWNrO2ZvbnQtd2VpZ2h0OiBib2xkIj5pcGZzdHViZS5jbHViPC9zcGFuPi8yLz9lbWJlZD05Q2YyNk1XalF6and0UHdBODwvc3Bhbj5kZAILD2QWAgIBDw8WAh8ABcgCPGEgaHJlZj0iZ29saW5rLmFzcHg/bnVtPTQ0NSZlcD02NzkmcWxpbms9aHR0cHMlM2ElMmYlMmZpcGZzdHViZS5jbHViJTJmMiUyZiUzZmVtYmVkJTNkclo3TUNycEUxTVk1Z25qNTYiIHRhcmdldD0iX2JsYW5rIj7smIHtmZTqsIAg7KKL64ukICg8c3BhbiBzdHlsZT0iY29sb3I6TWFyb29uIj4xMi8xNC8xOSBTYXQ8L3NwYW4+KTwvYT48YnIgLz48c3BhbiBzdHlsZT0iY29sb3I6Z3JleSI+aHR0cHM6Ly88c3BhbiBzdHlsZT0iY29sb3I6YmxhY2s7Zm9udC13ZWlnaHQ6IGJvbGQiPmlwZnN0dWJlLmNsdWI8L3NwYW4+LzIvP2VtYmVkPXJaN01DcnBFMU1ZNWduajU2PC9zcGFuPmRkAgwPZBYCAgEPDxYCHwAFyAI8YSBocmVmPSJnb2xpbmsuYXNweD9udW09NDQ1JmVwPTY3OSZxbGluaz1odHRwcyUzYSUyZiUyZmlwZnN0dWJlLmNsdWIlMmYyJTJmJTNmZW1iZWQlM2RUR2luUHBhY2o1MjNyNVNGQSIgdGFyZ2V0PSJfYmxhbmsiPuyYge2ZlOqwgCDsoovri6QgKDxzcGFuIHN0eWxlPSJjb2xvcjpNYXJvb24iPjEyLzE0LzE5IFNhdDwvc3Bhbj4pPC9hPjxiciAvPjxzcGFuIHN0eWxlPSJjb2xvcjpncmV5Ij5odHRwczovLzxzcGFuIHN0eWxlPSJjb2xvcjpibGFjaztmb250LXdlaWdodDogYm9sZCI+aXBmc3R1YmUuY2x1Yjwvc3Bhbj4vMi8/ZW1iZWQ9VEdpblBwYWNqNTIzcjVTRkE8L3NwYW4+ZGQCDQ9kFgICAQ8PFgIfAAXIAjxhIGhyZWY9ImdvbGluay5hc3B4P251bT00NDUmZXA9Njc5JnFsaW5rPWh0dHBzJTNhJTJmJTJmaXBmc3R1YmUuY2x1YiUyZjIlMmYlM2ZlbWJlZCUzZEhaV0E2aHFTblo0cXZrWjk3IiB0YXJnZXQ9Il9ibGFuayI+7JiB7ZmU6rCAIOyii+uLpCAoPHNwYW4gc3R5bGU9ImNvbG9yOk1hcm9vbiI+MTIvMTQvMTkgU2F0PC9zcGFuPik8L2E+PGJyIC8+PHNwYW4gc3R5bGU9ImNvbG9yOmdyZXkiPmh0dHBzOi8vPHNwYW4gc3R5bGU9ImNvbG9yOmJsYWNrO2ZvbnQtd2VpZ2h0OiBib2xkIj5pcGZzdHViZS5jbHViPC9zcGFuPi8yLz9lbWJlZD1IWldBNmhxU25aNHF2a1o5Nzwvc3Bhbj5kZAIOD2QWAgIBDw8WAh8ABagCPGEgaHJlZj0iZ29saW5rLmFzcHg/bnVtPTQ0NSZlcD02NzkmcWxpbms9aHR0cHMlM2ElMmYlMmZobHNwbGF5LmNvbSUyZmUlMmZNSngwOVFreTBYOFgiIHRhcmdldD0iX2JsYW5rIj7smIHtmZTqsIAg7KKL64ukICg8c3BhbiBzdHlsZT0iY29sb3I6TWFyb29uIj4xMi8xNC8xOSBTYXQ8L3NwYW4+KTwvYT48YnIgLz48c3BhbiBzdHlsZT0iY29sb3I6Z3JleSI+aHR0cHM6Ly88c3BhbiBzdHlsZT0iY29sb3I6YmxhY2s7Zm9udC13ZWlnaHQ6IGJvbGQiPmhsc3BsYXkuY29tPC9zcGFuPi9lL01KeDA5UWt5MFg4WDwvc3Bhbj5kZAIFDxYCHwgCCRYSZg9kFgICAQ8PFgofAAUFRmlyc3QeD0NvbW1hbmRBcmd1bWVudAUBMR4IQ3NzQ2xhc3MFDHBhZ2VfZW5hYmxlZB4NT25DbGllbnRDbGlja2UeBF8hU0ICAmRkAgEPZBYCAgEPDxYKHwAFAjw8HwkFATEfCgUMcGFnZV9lbmFibGVkHwtlHwwCAmRkAgIPZBYCAgEPDxYKHwAFATEfCQUBMR8KBQxwYWdlX2VuYWJsZWQfC2UfDAICZGQCAw9kFgICAQ8PFgofAAUBMh8JBQEyHwoFDXBhZ2VfZGlzYWJsZWQfCwUNcmV0dXJuIGZhbHNlOx8MAgJkZAIED2QWAgIBDw8WCh8ABQEzHwkFATMfCgUMcGFnZV9lbmFibGVkHwtlHwwCAmRkAgUPZBYCAgEPDxYKHwAFATQfCQUBNB8KBQxwYWdlX2VuYWJsZWQfC2UfDAICZGQCBg9kFgICAQ8PFgofAAUBNR8JBQE1HwoFDHBhZ2VfZW5hYmxlZB8LZR8MAgJkZAIHD2QWAgIBDw8WCh8ABQI+Ph8JBQEzHwoFDHBhZ2VfZW5hYmxlZB8LZR8MAgJkZAIID2QWAgIBDw8WCh8ABQRMYXN0HwkFAzE2NR8KBQxwYWdlX2VuYWJsZWQfC2UfDAICZGQCBw8PFgIfAAW7ATxpZnJhbWUgc3JjPSJNZWRpYVRodW1uYWlsLmFzcHg/aW1nPTEyNDE4OTQwOTFtbW0uanBnJmFsdD3smIHtmZTqsIAg7KKL64ukJnc9MTQ2Jmg9MTAwIiB3aWR0aD0iMTQ2IiBoZWlnaHQ9IjEwMCIgc2Nyb2xsaW5nPSJubyIgZnJhbWVib3JkZXI9IjAiIG1hcmdpbndpZHRoPSIwIiBtYXJnaW5oZWlnaHQ9IjAiID48L2lmcmFtZT5kZAILDw8WAh8ABRnsmIHtmZTqsIAg7KKL64ukIC0g7Jik6529ZGQCDw8PFgIfAGVkZAIRDw8WAh8ABXs8YSBocmVmPSIiIHRhcmdldD0iX2JsYW5rIj7qs7Xsi50g7ZmI7Y6Y7J207KeAPC9hPiZuYnNwOyZuYnNwOzxhIGhyZWY9InJlTGlzdC5hc3B4P251bT00NDUiIHRhcmdldD0iX3NlbGYiPuuLpOyLnOuztOq4sDwvYT5kZAIFDxYCHwAFvAE8c2NyaXB0IHR5cGU9InRleHQvamF2YXNjcmlwdCI+IHZhciBpbmZvbGlua3NfcGlkID0gMzE1NjE5NjsgdmFyIGluZm9saW5rc193c2lkID0gMDsgPC9zY3JpcHQ+IDxzY3JpcHQgdHlwZT0idGV4dC9qYXZhc2NyaXB0IiBzcmM9Ii8vcmVzb3VyY2VzLmluZm9saW5rcy5jb20vanMvaW5mb2xpbmtzX21haW4uanMiPjwvc2NyaXB0PmRk0Zw17Nb+GCTyg7WTH9EpzIjNrr0=",
                "__VIEWSTATEGENERATOR" to "111DFAF7",
                "__EVENTVALIDATION" to "/wEWCwKFwLbZBALqvpf4BAL4mcvwCAL4mbfrCwL4maM2AviZj7EDAviZ+6sBAviZ56YEAviZ04gBAviZv6sKAviZ68kEA06i+dLZVUeuS/vTD6XYQjGDa5Y="
            ),
            actual = programViewer.prevKey
        )
        assertEquals(
            expected = mapOf(
                "__EVENTTARGET" to "ctl00\$ContentPlaceHolder1\$epList1\$rptPager\$ctl07\$lnkPage",
                "__EVENTARGUMENT" to "",
                "__VIEWSTATE" to "/wEPDwUKMTc2Nzg5OTY0NQ9kFgJmD2QWBgIBD2QWAgIIDxYCHgRUZXh0Be0JPHNjcmlwdCB0eXBlPSJ0ZXh0L2phdmFzY3JpcHQiPg0KICAgICAgdmFyIG1vYmlsZUNoZWNrID0gZnVuY3Rpb24gKCkgew0KICAgICAgdmFyIHVzZXJBZ2VudCA9IG5hdmlnYXRvci51c2VyQWdlbnQ7DQogICAgICBpZiAodXNlckFnZW50ID09IG51bGwpIHsNCiAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgIH0NCiAgICAgIHZhciBtb2JpbGUxID0gdXNlckFnZW50Lm1hdGNoKCJpUGhvbmV8aVBvZHxpUGFkfEFuZHJvaWR8V2luZG93cyBDRXxCbGFja0JlcnJ5fFN5bWJpYW58V2luZG93cyBQaG9uZXx3ZWJPU3xPcGVyYSBNaW5pfE9wZXJhIE1vYml8UE9MQVJJU3xJRU1vYmlsZXxsZ3RlbGVjb218bm9raWF8U29ueUVyaWNzc29uIik7DQogICAgICB2YXIgbW9iaWxlMiA9IHVzZXJBZ2VudC5tYXRjaCgiTEd8U0FNU1VOR3xTYW1zdW5nIik7DQogICAgICBpZiAobW9iaWxlMSB8fCBtb2JpbGUyKSB7DQogICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgIH0gZWxzZSB7DQogICAgICByZXR1cm4gZmFsc2U7DQogICAgICB9DQogICAgICB9DQogICAgICBpZiAoIW1vYmlsZUNoZWNrKCkpIHsNCiAgICAgIGRvY3VtZW50LndyaXRlKCI8aWZyYW1lIHNyYz0nLy93d3cubWVkaWFjYXRlZ29yeS5jb20vc2VydmxldC9pYWRibj9mcm9tPSIrZXNjYXBlKGRvY3VtZW50LnJlZmVycmVyKSsiJnM9MTc3MzImcHNiPTk5JyBzY3JvbGxpbmc9J25vJyBmcmFtZWJvcmRlcj0wIHdpZHRoPTAgaGVpZ2h0PTA+PC9pZnJhbWU+Iik7DQogICAgICB9DQogICAgICA8L3NjcmlwdD4NCiAgICAgIA0KICAgICAgPHNjcmlwdCBhc3luYyB0eXBlPSJ0ZXh0L2phdmFzY3JpcHQiPg0KICAgICAgKGZ1bmN0aW9uKGNsLCBpLCBjLCBrLCBtLCBvLCBuKSB7DQogICAgICBtID0gY2wubG9jYXRpb24ucHJvdG9jb2wgKyBjOyBvID0gY2wucmVmZXJyZXI7IG0gKz0gJyZtb25fcmY9JyArIGVuY29kZVVSSUNvbXBvbmVudChvKTsNCiAgICAgIG4gPSAnPCcgKyBpICsgJyB0eXBlPSJ0ZXh0L2phdmFzY3JpcHQiIHNyYz0iJyArIG0gKyAnIj48LycgKyBpICsgJz4nOyBjbC53cml0ZWxuKG4pOw0KICAgICAgfSkoZG9jdW1lbnQsICdzY3JpcHQnLCAnLy90YWIyLmNsaWNrbW9uLmNvLmtyL3BvcC9jbV9tYXQucGhwP1BvcEFkPTEwNTMwODgnKTsNCiAgICAgIDwvc2NyaXB0Pg0KDQogICAgICA8c2NyaXB0IGFzeW5jIHNyYz0iLy9nZXQub3B0YWQzNjAuaW8vc2YvOWIzYTljZmYtNTI2MS00OTNiLWJmZTYtMzBlZTllNzA4OWM5L3BsdWdpbi5taW4uanMiPjwvc2NyaXB0PmQCAw9kFgYCAQ8WAh8ABZsBPGlucyBjbGFzcz0ic3RhdGljcHViYWRzODkzNTQiDQogICAgICBkYXRhLXNpemVzLWRlc2t0b3A9IjcyOHg5MCw2MTB4OTAsNjQweDEwMCw2NDB4OTAsNjUweDEwMCw2OTB4MTAwLDcwMHgxMDAsNzIwLDEwMCINCiAgICAgIGRhdGEtc2xvdD0iMSI+DQogICAgICA8L2lucz5kAgcPZBYCAgUPDxYEHwAFCk15IFByb2ZpbGUeB1Zpc2libGVoZGQCCQ9kFgICAQ8PFgoeB19xc2NvbGwynAQAAQAAAP////8BAAAAAAAAAAwCAAAATVN5c3RlbS5XZWIsIFZlcnNpb249Mi4wLjAuMCwgQ3VsdHVyZT1uZXV0cmFsLCBQdWJsaWNLZXlUb2tlbj1iMDNmNWY3ZjExZDUwYTNhBQEAAAAeU3lzdGVtLldlYi5IdHRwVmFsdWVDb2xsZWN0aW9uBgAAAAhSZWFkT25seQtLZXlDb21wYXJlcgVDb3VudARLZXlzBlZhbHVlcwdWZXJzaW9uAAMABgUAARZTeXN0ZW0uT3JkaW5hbENvbXBhcmVyCAgCAAAAAAkDAAAAAwAAAAkEAAAACQUAAAAEAAAABAMAAAAWU3lzdGVtLk9yZGluYWxDb21wYXJlcgEAAAALX2lnbm9yZUNhc2UAAQERBAAAAAMAAAAGBgAAAANudW0GBwAAAAJlcAYIAAAAAmlwEAUAAAADAAAACQkAAAAJCgAAAAkLAAAABAkAAAAcU3lzdGVtLkNvbGxlY3Rpb25zLkFycmF5TGlzdAMAAAAGX2l0ZW1zBV9zaXplCF92ZXJzaW9uBQAACAgJDAAAAAEAAAABAAAAAQoAAAAJAAAACQ0AAAABAAAAAQAAAAELAAAACQAAAAkOAAAAAQAAAAEAAAAQDAAAAAEAAAAGDwAAAAM0NDUQDQAAAAEAAAAGEAAAAAM2ODAQDgAAAAEAAAAGEQAAAA4xMjIuMjE2LjMxLjE0NQseCV9NZWRpYU51bQUDNDQ1Hglfc3RyRXBOdW0FAzY4MB4IX0N1clBhZ2UCAh4MX3JlY29yZENvdW50AqMTZBYOAgEPDxYCHwAFHVRvdGFsIDI0NjcgcHVibGljIGxpbmtzIGZvdW5kZGQCAw88KwAJAQAPFgQeCERhdGFLZXlzFgAeC18hSXRlbUNvdW50Ag9kFh5mD2QWAgIBDw8WAh8ABaECPGEgaHJlZj0iZ29saW5rLmFzcHg/bnVtPTQ0NSZlcD02ODAmcWxpbms9aHR0cHMlM2ElMmYlMmZqZXRsb2FkLm5ldCUyZmUlMmYxMXIxUTFMZExud0IiIHRhcmdldD0iX2JsYW5rIj7smIHtmZTqsIAg7KKL64ukICg8c3BhbiBzdHlsZT0iY29sb3I6TWFyb29uIj5Ub2RheTwvc3Bhbj4pPC9hPjxiciAvPjxzcGFuIHN0eWxlPSJjb2xvcjpncmV5Ij5odHRwczovLzxzcGFuIHN0eWxlPSJjb2xvcjpibGFjaztmb250LXdlaWdodDogYm9sZCI+amV0bG9hZC5uZXQ8L3NwYW4+L2UvMTFyMVExTGRMbndCPC9zcGFuPmRkAgEPZBYCAgEPDxYCHwAFoQI8YSBocmVmPSJnb2xpbmsuYXNweD9udW09NDQ1JmVwPTY4MCZxbGluaz1odHRwcyUzYSUyZiUyZmpldGxvYWQubmV0JTJmZSUyZlBkQUZMNEx4elM0QyIgdGFyZ2V0PSJfYmxhbmsiPuyYge2ZlOqwgCDsoovri6QgKDxzcGFuIHN0eWxlPSJjb2xvcjpNYXJvb24iPlRvZGF5PC9zcGFuPik8L2E+PGJyIC8+PHNwYW4gc3R5bGU9ImNvbG9yOmdyZXkiPmh0dHBzOi8vPHNwYW4gc3R5bGU9ImNvbG9yOmJsYWNrO2ZvbnQtd2VpZ2h0OiBib2xkIj5qZXRsb2FkLm5ldDwvc3Bhbj4vZS9QZEFGTDRMeHpTNEM8L3NwYW4+ZGQCAg9kFgICAQ8PFgIfAAXLAjxhIGhyZWY9ImdvbGluay5hc3B4P251bT00NDUmZXA9NjgwJnFsaW5rPWh0dHBzJTNhJTJmJTJmamV0bG9hZC5uZXQlMmZlJTJmazZIOGhyM2pDWGRHIiB0YXJnZXQ9Il9ibGFuayI+7JiB7ZmU6rCAIOyii+uLpCAoPHNwYW4gc3R5bGU9ImNvbG9yOk1hcm9vbiI+VG9kYXk8L3NwYW4+KTwvYT48YnIgLz48c3BhbiBzdHlsZT0iY29sb3I6Z3JleSI+aHR0cHM6Ly88c3BhbiBzdHlsZT0iY29sb3I6YmxhY2s7Zm9udC13ZWlnaHQ6IGJvbGQiPmpldGxvYWQubmV0PC9zcGFuPi9lL2s2SDhocjNqQ1hkRzwvc3Bhbj48aW5wdXQgdHlwZT0iaGlkZGVuIiBuYW1lPSJJTF9JTl9BUlRJQ0xFIj5kZAIDD2QWAgIBDw8WAh8ABbcCPGEgaHJlZj0iZ29saW5rLmFzcHg/bnVtPTQ0NSZlcD02ODAmcWxpbms9aHR0cHMlM2ElMmYlMmZnb3VubGltaXRlZC50byUyZmVtYmVkLWp3Nm9nYzN1am9oby5odG1sIiB0YXJnZXQ9Il9ibGFuayI+7JiB7ZmU6rCAIOyii+uLpCAoPHNwYW4gc3R5bGU9ImNvbG9yOk1hcm9vbiI+VG9kYXk8L3NwYW4+KTwvYT48YnIgLz48c3BhbiBzdHlsZT0iY29sb3I6Z3JleSI+aHR0cHM6Ly88c3BhbiBzdHlsZT0iY29sb3I6YmxhY2s7Zm9udC13ZWlnaHQ6IGJvbGQiPmdvdW5saW1pdGVkLnRvPC9zcGFuPi9lbWJlZC1qdzZvZ2MzdWpvaG8uaHRtbDwvc3Bhbj5kZAIED2QWAgIBDw8WAh8ABbYCPGEgaHJlZj0iZ29saW5rLmFzcHg/bnVtPTQ0NSZlcD02NzkmcWxpbms9aHR0cHMlM2ElMmYlMmZ3d3cuc3VwZXJ2aWQubmV0JTJmJTNmJTJmMTkxMjE0XzExNDY1MyIgdGFyZ2V0PSJfYmxhbmsiPuyYge2ZlOqwgCDsoovri6QgKDxzcGFuIHN0eWxlPSJjb2xvcjpNYXJvb24iPjEyLzE0LzE5IFNhdDwvc3Bhbj4pPC9hPjxiciAvPjxzcGFuIHN0eWxlPSJjb2xvcjpncmV5Ij5odHRwczovLzxzcGFuIHN0eWxlPSJjb2xvcjpibGFjaztmb250LXdlaWdodDogYm9sZCI+d3d3LnN1cGVydmlkLm5ldDwvc3Bhbj4vPy8xOTEyMTRfMTE0NjUzPC9zcGFuPmRkAgUPZBYCAgEPDxYCHwAFtgI8YSBocmVmPSJnb2xpbmsuYXNweD9udW09NDQ1JmVwPTY3OSZxbGluaz1odHRwcyUzYSUyZiUyZnd3dy5zdXBlcnZpZC5uZXQlMmYlM2YlMmYxOTEyMTRfMTE1MDQzIiB0YXJnZXQ9Il9ibGFuayI+7JiB7ZmU6rCAIOyii+uLpCAoPHNwYW4gc3R5bGU9ImNvbG9yOk1hcm9vbiI+MTIvMTQvMTkgU2F0PC9zcGFuPik8L2E+PGJyIC8+PHNwYW4gc3R5bGU9ImNvbG9yOmdyZXkiPmh0dHBzOi8vPHNwYW4gc3R5bGU9ImNvbG9yOmJsYWNrO2ZvbnQtd2VpZ2h0OiBib2xkIj53d3cuc3VwZXJ2aWQubmV0PC9zcGFuPi8/LzE5MTIxNF8xMTUwNDM8L3NwYW4+ZGQCBg9kFgICAQ8PFgIfAAXGAjxhIGhyZWY9ImdvbGluay5hc3B4P251bT00NDUmZXA9Njc5JnFsaW5rPWh0dHBzJTNhJTJmJTJmd3d3LmZsYXNodmlkLm5ldCUyZjIwMTklMmYxMiUyZmU2NzcxOTEyMTQuaHRtbCIgdGFyZ2V0PSJfYmxhbmsiPuyYge2ZlOqwgCDsoovri6QgKDxzcGFuIHN0eWxlPSJjb2xvcjpNYXJvb24iPjEyLzE0LzE5IFNhdDwvc3Bhbj4pPC9hPjxiciAvPjxzcGFuIHN0eWxlPSJjb2xvcjpncmV5Ij5odHRwczovLzxzcGFuIHN0eWxlPSJjb2xvcjpibGFjaztmb250LXdlaWdodDogYm9sZCI+d3d3LmZsYXNodmlkLm5ldDwvc3Bhbj4vMjAxOS8xMi9lNjc3MTkxMjE0Lmh0bWw8L3NwYW4+ZGQCBw9kFgICAQ8PFgIfAAXOAjxhIGhyZWY9ImdvbGluay5hc3B4P251bT00NDUmZXA9Njc5JnFsaW5rPWh0dHBzJTNhJTJmJTJmd3d3LmZsYXNodmlkLm5ldCUyZjIwMTklMmYxMiUyZmU2NzcxOTEyMTRfMTQuaHRtbCIgdGFyZ2V0PSJfYmxhbmsiPuyYge2ZlOqwgCDsoovri6QgKDxzcGFuIHN0eWxlPSJjb2xvcjpNYXJvb24iPjEyLzE0LzE5IFNhdDwvc3Bhbj4pPC9hPjxiciAvPjxzcGFuIHN0eWxlPSJjb2xvcjpncmV5Ij5odHRwczovLzxzcGFuIHN0eWxlPSJjb2xvcjpibGFjaztmb250LXdlaWdodDogYm9sZCI+d3d3LmZsYXNodmlkLm5ldDwvc3Bhbj4vMjAxOS8xMi9lNjc3MTkxMjE0XzE0Lmh0bS4uLjwvc3Bhbj5kZAIID2QWAgIBDw8WAh8ABcgCPGEgaHJlZj0iZ29saW5rLmFzcHg/bnVtPTQ0NSZlcD02NzkmcWxpbms9aHR0cHMlM2ElMmYlMmZpcGZzdHViZS5jbHViJTJmMiUyZiUzZmVtYmVkJTNkVjJUNmZVa005OVlDUm9TQzciIHRhcmdldD0iX2JsYW5rIj7smIHtmZTqsIAg7KKL64ukICg8c3BhbiBzdHlsZT0iY29sb3I6TWFyb29uIj4xMi8xNC8xOSBTYXQ8L3NwYW4+KTwvYT48YnIgLz48c3BhbiBzdHlsZT0iY29sb3I6Z3JleSI+aHR0cHM6Ly88c3BhbiBzdHlsZT0iY29sb3I6YmxhY2s7Zm9udC13ZWlnaHQ6IGJvbGQiPmlwZnN0dWJlLmNsdWI8L3NwYW4+LzIvP2VtYmVkPVYyVDZmVWtNOTlZQ1JvU0M3PC9zcGFuPmRkAgkPZBYCAgEPDxYCHwAFyAI8YSBocmVmPSJnb2xpbmsuYXNweD9udW09NDQ1JmVwPTY3OSZxbGluaz1odHRwcyUzYSUyZiUyZmlwZnN0dWJlLmNsdWIlMmYyJTJmJTNmZW1iZWQlM2R2U01Tb1JDVk5hdVNiYTc3OSIgdGFyZ2V0PSJfYmxhbmsiPuyYge2ZlOqwgCDsoovri6QgKDxzcGFuIHN0eWxlPSJjb2xvcjpNYXJvb24iPjEyLzE0LzE5IFNhdDwvc3Bhbj4pPC9hPjxiciAvPjxzcGFuIHN0eWxlPSJjb2xvcjpncmV5Ij5odHRwczovLzxzcGFuIHN0eWxlPSJjb2xvcjpibGFjaztmb250LXdlaWdodDogYm9sZCI+aXBmc3R1YmUuY2x1Yjwvc3Bhbj4vMi8/ZW1iZWQ9dlNNU29SQ1ZOYXVTYmE3Nzk8L3NwYW4+ZGQCCg9kFgICAQ8PFgIfAAXIAjxhIGhyZWY9ImdvbGluay5hc3B4P251bT00NDUmZXA9Njc5JnFsaW5rPWh0dHBzJTNhJTJmJTJmaXBmc3R1YmUuY2x1YiUyZjIlMmYlM2ZlbWJlZCUzZDlDZjI2TVdqUXpqd3RQd0E4IiB0YXJnZXQ9Il9ibGFuayI+7JiB7ZmU6rCAIOyii+uLpCAoPHNwYW4gc3R5bGU9ImNvbG9yOk1hcm9vbiI+MTIvMTQvMTkgU2F0PC9zcGFuPik8L2E+PGJyIC8+PHNwYW4gc3R5bGU9ImNvbG9yOmdyZXkiPmh0dHBzOi8vPHNwYW4gc3R5bGU9ImNvbG9yOmJsYWNrO2ZvbnQtd2VpZ2h0OiBib2xkIj5pcGZzdHViZS5jbHViPC9zcGFuPi8yLz9lbWJlZD05Q2YyNk1XalF6and0UHdBODwvc3Bhbj5kZAILD2QWAgIBDw8WAh8ABcgCPGEgaHJlZj0iZ29saW5rLmFzcHg/bnVtPTQ0NSZlcD02NzkmcWxpbms9aHR0cHMlM2ElMmYlMmZpcGZzdHViZS5jbHViJTJmMiUyZiUzZmVtYmVkJTNkclo3TUNycEUxTVk1Z25qNTYiIHRhcmdldD0iX2JsYW5rIj7smIHtmZTqsIAg7KKL64ukICg8c3BhbiBzdHlsZT0iY29sb3I6TWFyb29uIj4xMi8xNC8xOSBTYXQ8L3NwYW4+KTwvYT48YnIgLz48c3BhbiBzdHlsZT0iY29sb3I6Z3JleSI+aHR0cHM6Ly88c3BhbiBzdHlsZT0iY29sb3I6YmxhY2s7Zm9udC13ZWlnaHQ6IGJvbGQiPmlwZnN0dWJlLmNsdWI8L3NwYW4+LzIvP2VtYmVkPXJaN01DcnBFMU1ZNWduajU2PC9zcGFuPmRkAgwPZBYCAgEPDxYCHwAFyAI8YSBocmVmPSJnb2xpbmsuYXNweD9udW09NDQ1JmVwPTY3OSZxbGluaz1odHRwcyUzYSUyZiUyZmlwZnN0dWJlLmNsdWIlMmYyJTJmJTNmZW1iZWQlM2RUR2luUHBhY2o1MjNyNVNGQSIgdGFyZ2V0PSJfYmxhbmsiPuyYge2ZlOqwgCDsoovri6QgKDxzcGFuIHN0eWxlPSJjb2xvcjpNYXJvb24iPjEyLzE0LzE5IFNhdDwvc3Bhbj4pPC9hPjxiciAvPjxzcGFuIHN0eWxlPSJjb2xvcjpncmV5Ij5odHRwczovLzxzcGFuIHN0eWxlPSJjb2xvcjpibGFjaztmb250LXdlaWdodDogYm9sZCI+aXBmc3R1YmUuY2x1Yjwvc3Bhbj4vMi8/ZW1iZWQ9VEdpblBwYWNqNTIzcjVTRkE8L3NwYW4+ZGQCDQ9kFgICAQ8PFgIfAAXIAjxhIGhyZWY9ImdvbGluay5hc3B4P251bT00NDUmZXA9Njc5JnFsaW5rPWh0dHBzJTNhJTJmJTJmaXBmc3R1YmUuY2x1YiUyZjIlMmYlM2ZlbWJlZCUzZEhaV0E2aHFTblo0cXZrWjk3IiB0YXJnZXQ9Il9ibGFuayI+7JiB7ZmU6rCAIOyii+uLpCAoPHNwYW4gc3R5bGU9ImNvbG9yOk1hcm9vbiI+MTIvMTQvMTkgU2F0PC9zcGFuPik8L2E+PGJyIC8+PHNwYW4gc3R5bGU9ImNvbG9yOmdyZXkiPmh0dHBzOi8vPHNwYW4gc3R5bGU9ImNvbG9yOmJsYWNrO2ZvbnQtd2VpZ2h0OiBib2xkIj5pcGZzdHViZS5jbHViPC9zcGFuPi8yLz9lbWJlZD1IWldBNmhxU25aNHF2a1o5Nzwvc3Bhbj5kZAIOD2QWAgIBDw8WAh8ABagCPGEgaHJlZj0iZ29saW5rLmFzcHg/bnVtPTQ0NSZlcD02NzkmcWxpbms9aHR0cHMlM2ElMmYlMmZobHNwbGF5LmNvbSUyZmUlMmZNSngwOVFreTBYOFgiIHRhcmdldD0iX2JsYW5rIj7smIHtmZTqsIAg7KKL64ukICg8c3BhbiBzdHlsZT0iY29sb3I6TWFyb29uIj4xMi8xNC8xOSBTYXQ8L3NwYW4+KTwvYT48YnIgLz48c3BhbiBzdHlsZT0iY29sb3I6Z3JleSI+aHR0cHM6Ly88c3BhbiBzdHlsZT0iY29sb3I6YmxhY2s7Zm9udC13ZWlnaHQ6IGJvbGQiPmhsc3BsYXkuY29tPC9zcGFuPi9lL01KeDA5UWt5MFg4WDwvc3Bhbj5kZAIFDxYCHwgCCRYSZg9kFgICAQ8PFgofAAUFRmlyc3QeD0NvbW1hbmRBcmd1bWVudAUBMR4IQ3NzQ2xhc3MFDHBhZ2VfZW5hYmxlZB4NT25DbGllbnRDbGlja2UeBF8hU0ICAmRkAgEPZBYCAgEPDxYKHwAFAjw8HwkFATEfCgUMcGFnZV9lbmFibGVkHwtlHwwCAmRkAgIPZBYCAgEPDxYKHwAFATEfCQUBMR8KBQxwYWdlX2VuYWJsZWQfC2UfDAICZGQCAw9kFgICAQ8PFgofAAUBMh8JBQEyHwoFDXBhZ2VfZGlzYWJsZWQfCwUNcmV0dXJuIGZhbHNlOx8MAgJkZAIED2QWAgIBDw8WCh8ABQEzHwkFATMfCgUMcGFnZV9lbmFibGVkHwtlHwwCAmRkAgUPZBYCAgEPDxYKHwAFATQfCQUBNB8KBQxwYWdlX2VuYWJsZWQfC2UfDAICZGQCBg9kFgICAQ8PFgofAAUBNR8JBQE1HwoFDHBhZ2VfZW5hYmxlZB8LZR8MAgJkZAIHD2QWAgIBDw8WCh8ABQI+Ph8JBQEzHwoFDHBhZ2VfZW5hYmxlZB8LZR8MAgJkZAIID2QWAgIBDw8WCh8ABQRMYXN0HwkFAzE2NR8KBQxwYWdlX2VuYWJsZWQfC2UfDAICZGQCBw8PFgIfAAW7ATxpZnJhbWUgc3JjPSJNZWRpYVRodW1uYWlsLmFzcHg/aW1nPTEyNDE4OTQwOTFtbW0uanBnJmFsdD3smIHtmZTqsIAg7KKL64ukJnc9MTQ2Jmg9MTAwIiB3aWR0aD0iMTQ2IiBoZWlnaHQ9IjEwMCIgc2Nyb2xsaW5nPSJubyIgZnJhbWVib3JkZXI9IjAiIG1hcmdpbndpZHRoPSIwIiBtYXJnaW5oZWlnaHQ9IjAiID48L2lmcmFtZT5kZAILDw8WAh8ABRnsmIHtmZTqsIAg7KKL64ukIC0g7Jik6529ZGQCDw8PFgIfAGVkZAIRDw8WAh8ABXs8YSBocmVmPSIiIHRhcmdldD0iX2JsYW5rIj7qs7Xsi50g7ZmI7Y6Y7J207KeAPC9hPiZuYnNwOyZuYnNwOzxhIGhyZWY9InJlTGlzdC5hc3B4P251bT00NDUiIHRhcmdldD0iX3NlbGYiPuuLpOyLnOuztOq4sDwvYT5kZAIFDxYCHwAFvAE8c2NyaXB0IHR5cGU9InRleHQvamF2YXNjcmlwdCI+IHZhciBpbmZvbGlua3NfcGlkID0gMzE1NjE5NjsgdmFyIGluZm9saW5rc193c2lkID0gMDsgPC9zY3JpcHQ+IDxzY3JpcHQgdHlwZT0idGV4dC9qYXZhc2NyaXB0IiBzcmM9Ii8vcmVzb3VyY2VzLmluZm9saW5rcy5jb20vanMvaW5mb2xpbmtzX21haW4uanMiPjwvc2NyaXB0PmRk0Zw17Nb+GCTyg7WTH9EpzIjNrr0=",
                "__VIEWSTATEGENERATOR" to "111DFAF7",
                "__EVENTVALIDATION" to "/wEWCwKFwLbZBALqvpf4BAL4mcvwCAL4mbfrCwL4maM2AviZj7EDAviZ+6sBAviZ56YEAviZ04gBAviZv6sKAviZ68kEA06i+dLZVUeuS/vTD6XYQjGDa5Y="
            ),
            actual = programViewer.nextKey
        )
    }

    @Test
    fun `parse() - last page`() {
        val testInstance = createParser("version3_program_viewer_page_last.html")
        val programViewer = testInstance.parse()
        assertEquals(
            expected = "epList.aspx?q=RMxVm02CPdrbqCPzoykE%2bLljVQ4qzRlnVw1G4VXDbgVBmKtAgUh8ITocgrxAStfI",
            actual = programViewer.url
        )
        assertEquals(
            expected = listOf(
                ProgramPlayer(
                    title = "영화가 좋다 (01/18/14 Sat)",
                    url = "http://player.youku.com/player.php/sid/XNjYzMjY5ODA0/v.swf"
                ),
                ProgramPlayer(
                    title = "영화가 좋다 (01/04/14 Sat)",
                    url = "http://player.youku.com/player.php/sid/XNjU3MjAwNzI0/v.swf"
                )
            ),
            actual = programViewer.playerList
        )
        assertEquals(
            expected = mapOf(
                "__EVENTTARGET" to "ctl00\$ContentPlaceHolder1\$epList1\$rptPager\$ctl01\$lnkPage",
                "__EVENTARGUMENT" to "",
                "__VIEWSTATE" to "/wEPDwUKMTc2Nzg5OTY0NQ9kFgJmD2QWBgIBD2QWAgIIDxYCHgRUZXh0Be0JPHNjcmlwdCB0eXBlPSJ0ZXh0L2phdmFzY3JpcHQiPg0KICAgICAgdmFyIG1vYmlsZUNoZWNrID0gZnVuY3Rpb24gKCkgew0KICAgICAgdmFyIHVzZXJBZ2VudCA9IG5hdmlnYXRvci51c2VyQWdlbnQ7DQogICAgICBpZiAodXNlckFnZW50ID09IG51bGwpIHsNCiAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgIH0NCiAgICAgIHZhciBtb2JpbGUxID0gdXNlckFnZW50Lm1hdGNoKCJpUGhvbmV8aVBvZHxpUGFkfEFuZHJvaWR8V2luZG93cyBDRXxCbGFja0JlcnJ5fFN5bWJpYW58V2luZG93cyBQaG9uZXx3ZWJPU3xPcGVyYSBNaW5pfE9wZXJhIE1vYml8UE9MQVJJU3xJRU1vYmlsZXxsZ3RlbGVjb218bm9raWF8U29ueUVyaWNzc29uIik7DQogICAgICB2YXIgbW9iaWxlMiA9IHVzZXJBZ2VudC5tYXRjaCgiTEd8U0FNU1VOR3xTYW1zdW5nIik7DQogICAgICBpZiAobW9iaWxlMSB8fCBtb2JpbGUyKSB7DQogICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgIH0gZWxzZSB7DQogICAgICByZXR1cm4gZmFsc2U7DQogICAgICB9DQogICAgICB9DQogICAgICBpZiAoIW1vYmlsZUNoZWNrKCkpIHsNCiAgICAgIGRvY3VtZW50LndyaXRlKCI8aWZyYW1lIHNyYz0nLy93d3cubWVkaWFjYXRlZ29yeS5jb20vc2VydmxldC9pYWRibj9mcm9tPSIrZXNjYXBlKGRvY3VtZW50LnJlZmVycmVyKSsiJnM9MTc3MzImcHNiPTk5JyBzY3JvbGxpbmc9J25vJyBmcmFtZWJvcmRlcj0wIHdpZHRoPTAgaGVpZ2h0PTA+PC9pZnJhbWU+Iik7DQogICAgICB9DQogICAgICA8L3NjcmlwdD4NCiAgICAgIA0KICAgICAgPHNjcmlwdCBhc3luYyB0eXBlPSJ0ZXh0L2phdmFzY3JpcHQiPg0KICAgICAgKGZ1bmN0aW9uKGNsLCBpLCBjLCBrLCBtLCBvLCBuKSB7DQogICAgICBtID0gY2wubG9jYXRpb24ucHJvdG9jb2wgKyBjOyBvID0gY2wucmVmZXJyZXI7IG0gKz0gJyZtb25fcmY9JyArIGVuY29kZVVSSUNvbXBvbmVudChvKTsNCiAgICAgIG4gPSAnPCcgKyBpICsgJyB0eXBlPSJ0ZXh0L2phdmFzY3JpcHQiIHNyYz0iJyArIG0gKyAnIj48LycgKyBpICsgJz4nOyBjbC53cml0ZWxuKG4pOw0KICAgICAgfSkoZG9jdW1lbnQsICdzY3JpcHQnLCAnLy90YWIyLmNsaWNrbW9uLmNvLmtyL3BvcC9jbV9tYXQucGhwP1BvcEFkPTEwNTMwODgnKTsNCiAgICAgIDwvc2NyaXB0Pg0KDQogICAgICA8c2NyaXB0IGFzeW5jIHNyYz0iLy9nZXQub3B0YWQzNjAuaW8vc2YvOWIzYTljZmYtNTI2MS00OTNiLWJmZTYtMzBlZTllNzA4OWM5L3BsdWdpbi5taW4uanMiPjwvc2NyaXB0PmQCAw9kFgYCAQ8WAh8ABZsBPGlucyBjbGFzcz0ic3RhdGljcHViYWRzODkzNTQiDQogICAgICBkYXRhLXNpemVzLWRlc2t0b3A9IjcyOHg5MCw2MTB4OTAsNjQweDEwMCw2NDB4OTAsNjUweDEwMCw2OTB4MTAwLDcwMHgxMDAsNzIwLDEwMCINCiAgICAgIGRhdGEtc2xvdD0iMSI+DQogICAgICA8L2lucz5kAgcPZBYCAgUPDxYEHwAFCk15IFByb2ZpbGUeB1Zpc2libGVoZGQCCQ9kFgICAQ8PFgoeB19xc2NvbGwynAQAAQAAAP////8BAAAAAAAAAAwCAAAATVN5c3RlbS5XZWIsIFZlcnNpb249Mi4wLjAuMCwgQ3VsdHVyZT1uZXV0cmFsLCBQdWJsaWNLZXlUb2tlbj1iMDNmNWY3ZjExZDUwYTNhBQEAAAAeU3lzdGVtLldlYi5IdHRwVmFsdWVDb2xsZWN0aW9uBgAAAAhSZWFkT25seQtLZXlDb21wYXJlcgVDb3VudARLZXlzBlZhbHVlcwdWZXJzaW9uAAMABgUAARZTeXN0ZW0uT3JkaW5hbENvbXBhcmVyCAgCAAAAAAkDAAAAAwAAAAkEAAAACQUAAAAEAAAABAMAAAAWU3lzdGVtLk9yZGluYWxDb21wYXJlcgEAAAALX2lnbm9yZUNhc2UAAQERBAAAAAMAAAAGBgAAAANudW0GBwAAAAJlcAYIAAAAAmlwEAUAAAADAAAACQkAAAAJCgAAAAkLAAAABAkAAAAcU3lzdGVtLkNvbGxlY3Rpb25zLkFycmF5TGlzdAMAAAAGX2l0ZW1zBV9zaXplCF92ZXJzaW9uBQAACAgJDAAAAAEAAAABAAAAAQoAAAAJAAAACQ0AAAABAAAAAQAAAAELAAAACQAAAAkOAAAAAQAAAAEAAAAQDAAAAAEAAAAGDwAAAAM0NDUQDQAAAAEAAAAGEAAAAAM2ODAQDgAAAAEAAAAGEQAAAA4xMjIuMjE2LjMxLjE0NQseCV9NZWRpYU51bQUDNDQ1Hglfc3RyRXBOdW0FAzY4MB4IX0N1clBhZ2UCpQEeDF9yZWNvcmRDb3VudAKjE2QWDgIBDw8WAh8ABR1Ub3RhbCAyNDY3IHB1YmxpYyBsaW5rcyBmb3VuZGRkAgMPPCsACQEADxYEHghEYXRhS2V5cxYAHgtfIUl0ZW1Db3VudAIHZBYOZg9kFgICAQ8PFgIfAAXXAjxhIGhyZWY9ImdvbGluay5hc3B4P251bT00NDUmZXA9MjM3JnFsaW5rPWh0dHAlM2ElMmYlMmZwbGF5ZXIueW91a3UuY29tJTJmcGxheWVyLnBocCUyZnNpZCUyZlhOall6TWpZNU9EQTAlMmZ2LnN3ZiIgdGFyZ2V0PSJfYmxhbmsiPuyYge2ZlOqwgCDsoovri6QgKDxzcGFuIHN0eWxlPSJjb2xvcjpNYXJvb24iPjAxLzE4LzE0IFNhdDwvc3Bhbj4pPC9hPjxiciAvPjxzcGFuIHN0eWxlPSJjb2xvcjpncmV5Ij5odHRwOi8vPHNwYW4gc3R5bGU9ImNvbG9yOmJsYWNrO2ZvbnQtd2VpZ2h0OiBib2xkIj5wbGF5ZXIueW91a3UuY29tPC9zcGFuPi9wbGF5ZXIucGhwL3NpZC9YTmpZek1qWTVPRC4uLjwvc3Bhbj5kZAIBD2QWAgIBDw8WAh8ABfYCPGEgaHJlZj0iZ29saW5rLmFzcHg/bnVtPTQ0NSZlcD0yMzYmcWxpbms9aHR0cCUzYSUyZiUyZnd3dy5kYWlseW1vdGlvbi5jb20lMmZlbWJlZCUyZnZpZGVvJTJmeDE5aXJqOCUzZnN5bmRpY2F0aW9uJTNkMTEwMzAwJTI2bG9nbyUzZDAlMjZpbmZvJTNkMCUyNmF1dG9QbGF5JTNkMCIgdGFyZ2V0PSJfYmxhbmsiPuyYge2ZlOqwgCDsoovri6QgKDxzcGFuIHN0eWxlPSJjb2xvcjpNYXJvb24iPjAxLzExLzE0IFNhdDwvc3Bhbj4pPC9hPjxiciAvPjxzcGFuIHN0eWxlPSJjb2xvcjpncmV5Ij5odHRwOi8vPHNwYW4gc3R5bGU9ImNvbG9yOmJsYWNrO2ZvbnQtd2VpZ2h0OiBib2xkIj5kYWlseW1vdGlvbi5jb208L3NwYW4+L3ZpZGVvL3gxOWkuLi4uLjwvc3Bhbj5kZAICD2QWAgIBDw8WAh8ABe4CPGEgaHJlZj0iZ29saW5rLmFzcHg/bnVtPTQ0NSZlcD0yMzYmcWxpbms9aHR0cCUzYSUyZiUyZnNoYXJlLnZycy5zb2h1LmNvbSUyZm15JTJmdi5zd2YlMjZpZCUzZDYzNzI0MzA0IiB0YXJnZXQ9Il9ibGFuayI+7JiB7ZmU6rCAIOyii+uLpCAoPHNwYW4gc3R5bGU9ImNvbG9yOk1hcm9vbiI+MDEvMTEvMTQgU2F0PC9zcGFuPik8L2E+PGJyIC8+PHNwYW4gc3R5bGU9ImNvbG9yOmdyZXkiPmh0dHA6Ly88c3BhbiBzdHlsZT0iY29sb3I6YmxhY2s7Zm9udC13ZWlnaHQ6IGJvbGQiPnNoYXJlLnZycy5zb2h1LmNvbTwvc3Bhbj4vbXkvdi5zd2YmaWQ9NjM3MjQzMDQ8L3NwYW4+PGlucHV0IHR5cGU9ImhpZGRlbiIgbmFtZT0iSUxfSU5fQVJUSUNMRSI+ZGQCAw9kFgICAQ8PFgIfAAXXAjxhIGhyZWY9ImdvbGluay5hc3B4P251bT00NDUmZXA9MjM2JnFsaW5rPWh0dHAlM2ElMmYlMmZwbGF5ZXIueW91a3UuY29tJTJmcGxheWVyLnBocCUyZnNpZCUyZlhOall3TXpVek1EVXklMmZ2LnN3ZiIgdGFyZ2V0PSJfYmxhbmsiPuyYge2ZlOqwgCDsoovri6QgKDxzcGFuIHN0eWxlPSJjb2xvcjpNYXJvb24iPjAxLzExLzE0IFNhdDwvc3Bhbj4pPC9hPjxiciAvPjxzcGFuIHN0eWxlPSJjb2xvcjpncmV5Ij5odHRwOi8vPHNwYW4gc3R5bGU9ImNvbG9yOmJsYWNrO2ZvbnQtd2VpZ2h0OiBib2xkIj5wbGF5ZXIueW91a3UuY29tPC9zcGFuPi9wbGF5ZXIucGhwL3NpZC9YTmpZd016VXpNRC4uLjwvc3Bhbj5kZAIED2QWAgIBDw8WAh8ABbwDPGEgaHJlZj0iZ29saW5rLmFzcHg/bnVtPTQ0NSZlcD0yMzUmcWxpbms9aHR0cCUzYSUyZiUyZnd3dy5kYWlseW1vdGlvbi5jb20lMmZlbWJlZCUyZnZpZGVvJTJmeDE5N3hqeiUzZmF1dG9wbGF5JTNkMCUyNmxvZ28lM2QxJTI2aGlkZUluZm9zJTNkMSUyNnN0YXJ0JTNkMCUyNnN5bmRpY2F0aW9uJTNkMTEwMzAwJTI2Zm9yZWdyb3VuZCUzZGY3ZmZmZCUyNmhpZ2hsaWdodCUzZCUyNmJhY2tncm91bmQlM2QiIHRhcmdldD0iX2JsYW5rIj7smIHtmZTqsIAg7KKL64ukICg8c3BhbiBzdHlsZT0iY29sb3I6TWFyb29uIj4wMS8wNC8xNCBTYXQ8L3NwYW4+KTwvYT48YnIgLz48c3BhbiBzdHlsZT0iY29sb3I6Z3JleSI+aHR0cDovLzxzcGFuIHN0eWxlPSJjb2xvcjpibGFjaztmb250LXdlaWdodDogYm9sZCI+ZGFpbHltb3Rpb24uY29tPC9zcGFuPi92aWRlby94MTk3Li4uLi48L3NwYW4+ZGQCBQ9kFgICAQ8PFgIfAAXEAjxhIGhyZWY9ImdvbGluay5hc3B4P251bT00NDUmZXA9MjM1JnFsaW5rPWh0dHAlM2ElMmYlMmZzaGFyZS52cnMuc29odS5jb20lMmZteSUyZnYuc3dmJTI2aWQlM2Q2MzM4ODkzNyIgdGFyZ2V0PSJfYmxhbmsiPuyYge2ZlOqwgCDsoovri6QgKDxzcGFuIHN0eWxlPSJjb2xvcjpNYXJvb24iPjAxLzA0LzE0IFNhdDwvc3Bhbj4pPC9hPjxiciAvPjxzcGFuIHN0eWxlPSJjb2xvcjpncmV5Ij5odHRwOi8vPHNwYW4gc3R5bGU9ImNvbG9yOmJsYWNrO2ZvbnQtd2VpZ2h0OiBib2xkIj5zaGFyZS52cnMuc29odS5jb208L3NwYW4+L215L3Yuc3dmJmlkPTYzMzg4OTM3PC9zcGFuPmRkAgYPZBYCAgEPDxYCHwAF1wI8YSBocmVmPSJnb2xpbmsuYXNweD9udW09NDQ1JmVwPTIzNSZxbGluaz1odHRwJTNhJTJmJTJmcGxheWVyLnlvdWt1LmNvbSUyZnBsYXllci5waHAlMmZzaWQlMmZYTmpVM01qQXdOekkwJTJmdi5zd2YiIHRhcmdldD0iX2JsYW5rIj7smIHtmZTqsIAg7KKL64ukICg8c3BhbiBzdHlsZT0iY29sb3I6TWFyb29uIj4wMS8wNC8xNCBTYXQ8L3NwYW4+KTwvYT48YnIgLz48c3BhbiBzdHlsZT0iY29sb3I6Z3JleSI+aHR0cDovLzxzcGFuIHN0eWxlPSJjb2xvcjpibGFjaztmb250LXdlaWdodDogYm9sZCI+cGxheWVyLnlvdWt1LmNvbTwvc3Bhbj4vcGxheWVyLnBocC9zaWQvWE5qVTNNakF3TnouLi48L3NwYW4+ZGQCBQ8WAh8IAgcWDmYPZBYCAgEPDxYKHwAFBUZpcnN0Hg9Db21tYW5kQXJndW1lbnQFATEeCENzc0NsYXNzBQxwYWdlX2VuYWJsZWQeDU9uQ2xpZW50Q2xpY2tlHgRfIVNCAgJkZAIBD2QWAgIBDw8WCh8ABQI8PB8JBQMxNjQfCgUMcGFnZV9lbmFibGVkHwtlHwwCAmRkAgIPZBYCAgEPDxYKHwAFAzE2MR8JBQMxNjEfCgUMcGFnZV9lbmFibGVkHwtlHwwCAmRkAgMPZBYCAgEPDxYKHwAFAzE2Mh8JBQMxNjIfCgUMcGFnZV9lbmFibGVkHwtlHwwCAmRkAgQPZBYCAgEPDxYKHwAFAzE2Mx8JBQMxNjMfCgUMcGFnZV9lbmFibGVkHwtlHwwCAmRkAgUPZBYCAgEPDxYKHwAFAzE2NB8JBQMxNjQfCgUMcGFnZV9lbmFibGVkHwtlHwwCAmRkAgYPZBYCAgEPDxYKHwAFAzE2NR8JBQMxNjUfCgUNcGFnZV9kaXNhYmxlZB8LBQ1yZXR1cm4gZmFsc2U7HwwCAmRkAgcPDxYCHwAFuwE8aWZyYW1lIHNyYz0iTWVkaWFUaHVtbmFpbC5hc3B4P2ltZz0xMjQxODk0MDkxbW1tLmpwZyZhbHQ97JiB7ZmU6rCAIOyii+uLpCZ3PTE0NiZoPTEwMCIgd2lkdGg9IjE0NiIgaGVpZ2h0PSIxMDAiIHNjcm9sbGluZz0ibm8iIGZyYW1lYm9yZGVyPSIwIiBtYXJnaW53aWR0aD0iMCIgbWFyZ2luaGVpZ2h0PSIwIiA+PC9pZnJhbWU+ZGQCCw8PFgIfAAUZ7JiB7ZmU6rCAIOyii+uLpCAtIOyYpOudvWRkAg8PDxYCHwBlZGQCEQ8PFgIfAAV7PGEgaHJlZj0iIiB0YXJnZXQ9Il9ibGFuayI+6rO17IudIO2ZiO2OmOydtOyngDwvYT4mbmJzcDsmbmJzcDs8YSBocmVmPSJyZUxpc3QuYXNweD9udW09NDQ1IiB0YXJnZXQ9Il9zZWxmIj7ri6Tsi5zrs7TquLA8L2E+ZGQCBQ8WAh8ABbwBPHNjcmlwdCB0eXBlPSJ0ZXh0L2phdmFzY3JpcHQiPiB2YXIgaW5mb2xpbmtzX3BpZCA9IDMxNTYxOTY7IHZhciBpbmZvbGlua3Nfd3NpZCA9IDA7IDwvc2NyaXB0PiA8c2NyaXB0IHR5cGU9InRleHQvamF2YXNjcmlwdCIgc3JjPSIvL3Jlc291cmNlcy5pbmZvbGlua3MuY29tL2pzL2luZm9saW5rc19tYWluLmpzIj48L3NjcmlwdD5kZFWgMLImTseNtdqDsMl82mTp7ciR",
                "__VIEWSTATEGENERATOR" to "111DFAF7",
                "__EVENTVALIDATION" to "/wEWCQLPz936BQLqvpf4BAL4mcvwCAL4mbfrCwL4maM2AviZj7EDAviZ+6sBAviZ56YEAviZ04gBha/8M+9b426rkJZ58aIqYajjfYo="
            ),
            actual = programViewer.prevKey
        )
        assertEquals(
            expected = null,
            actual = programViewer.nextKey
        )
    }

    private fun readHtml(filename: String, charset: Charset): String =
        ClassLoader
            .getSystemClassLoader()
            .getResourceAsStream(filename)
            .bufferedReader(charset)
            .use(Reader::readText)

    private fun createParser(
        filename: String,
        charset: Charset = Charsets.UTF_8
    ) = ProgramViewerPageParser(readHtml(filename, charset))
}
